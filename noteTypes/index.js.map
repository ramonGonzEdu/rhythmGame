{"version":3,"sources":["noteTypes/index.ts"],"sourcesContent":["import { hex2, map } from '../helper.js';\nimport { PersistentCircle } from '../persistCircle.js';\nimport { addPersistent } from '../persistent.js';\nimport { PersistentLine } from '../persistLine.js';\nimport { PersistentText } from '../persistText.js';\n\nconst scoreMap: [number, string, string][] = [\n\t[97, 'P E R F E C T', '#6644ee'],\n\t[80, 'G R E A T', '#66cc99'],\n\t[60, 'G O O D', '#eecc33'],\n\t[40, 'O K', '#ee7733'],\n\t[0, 'B A D', '#ee2233'],\n\t[-Infinity, 'M I S S', '#882233'],\n];\n\nexport function scoreToColor(score: number): [string, string] {\n\tfor (const [min, text, color] of scoreMap) {\n\t\tif (score >= min) {\n\t\t\treturn [text, color];\n\t\t}\n\t}\n\treturn ['error', '#000000'];\n}\n\nexport type NoteType = 'circle' | 'left' | 'up' | 'right' | 'down';\n// export type Note = {\n// \ttype: NoteType;\n// \tx: number;\n// \ty: number;\n// \tcreated: number;\n// \tend: any;\n// \tsize: number;\n// };\n// export type Note = {\n// \tcreated: number;\n// \tend: any;\n// } & (\n// \t| {\n// \t\t\ttype: 'circle';\n// \t\t\tx: number;\n// \t\t\ty: number;\n// \t\t\tsize: number;\n// \t  }\n// \t| {\n// \t\t\ttype: 'left';\n// \t  }\n// \t| {\n// \t\t\ttype: 'up';\n// \t  }\n// \t| {\n// \t\t\ttype: 'right';\n// \t  }\n// \t| {\n// \t\t\ttype: 'down';\n// \t  }\n// );\n\nexport interface INote {\n\tkey: string;\n\tcreated: number;\n\tend: number;\n\n\tisDead(): boolean;\n\tdraw(ctx: CanvasRenderingContext2D): void;\n\tscore(ctx: CanvasRenderingContext2D, scores: number[], score?: number): void;\n}\n\nexport abstract class Note implements INote {\n\tkey = '';\n\n\tcreated: number;\n\n\tlifetimeMapper: (n: number) => number;\n\n\tisDead(): boolean {\n\t\treturn this.end < Date.now();\n\t}\n\tabstract draw(ctx: CanvasRenderingContext2D): void;\n\tabstract score(\n\t\tctx: CanvasRenderingContext2D,\n\t\tscores: number[],\n\t\tscore?: number\n\t): void;\n\n\tconstructor(public end: number) {\n\t\tthis.created = Date.now();\n\t\tthis.end = end;\n\t\tthis.lifetimeMapper = map(this.created, this.end, 0, 1);\n\t}\n}\n\nexport class CircleNote extends Note {\n\tkey = ' ';\n\n\tstatic maxCircleSize = 1920;\n\t// {\n\t// \ttype: 'circle',\n\t// \tx: Math.random() * innerWidth,\n\t// \ty: Math.random() * innerHeight,\n\t// \tcreated: Date.now(),\n\t// \tend:\n\t// \t\t(currentNotes[currentNotes.length - 1]?.end ?? Date.now()) +\n\t// \t\t500 +\n\t// \t\tmap(0, 100, 5000, 1000)(scoreAvg() ?? 0) * Math.random(),\n\t// \tsize: 50 + Math.random() * 100,\n\t// };\n\tconstructor(\n\t\tpublic end: number,\n\t\tpublic color: string = '#bb77bb',\n\t\tpublic x: number = Math.random() * innerWidth,\n\t\tpublic y: number = Math.random() * innerHeight,\n\t\tpublic size: number = 50 + Math.random() * 100\n\t) {\n\t\tsuper(end);\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.size = size;\n\t\tthis.color = color;\n\t}\n\n\tisDead(): boolean {\n\t\treturn (\n\t\t\tmap(\n\t\t\t\tthis.created,\n\t\t\t\tthis.end,\n\t\t\t\tCircleNote.maxCircleSize,\n\t\t\t\tthis.size\n\t\t\t)(Date.now()) < 0\n\t\t);\n\t}\n\tscore(\n\t\tctx: CanvasRenderingContext2D,\n\t\tscores: number[],\n\t\tscore: number = 100 -\n\t\t\tMath.abs(map(this.created, this.end, -200, 0)(Date.now()))\n\t): void {\n\t\tscores.push(score);\n\n\t\tconst [text, color] = scoreToColor(score);\n\t\taddPersistent(new PersistentText(text, color, this.x, this.y));\n\t\taddPersistent(new PersistentCircle(this.x, this.y, this.size, color));\n\t}\n\tdraw(ctx: CanvasRenderingContext2D) {\n\t\tctx.strokeStyle = this.color;\n\t\tctx.lineWidth = 10;\n\n\t\tctx.fillStyle =\n\t\t\tthis.color + hex2(this.lifetimeMapper(Date.now()) ** 5 * 180);\n\t\tctx.beginPath();\n\t\tif (\n\t\t\tmap(\n\t\t\t\tthis.created,\n\t\t\t\tthis.end,\n\t\t\t\tCircleNote.maxCircleSize,\n\t\t\t\tthis.size\n\t\t\t)(Date.now()) > 0\n\t\t)\n\t\t\tctx.arc(\n\t\t\t\tthis.x,\n\t\t\t\tthis.y,\n\t\t\t\tmap(\n\t\t\t\t\tthis.created,\n\t\t\t\t\tthis.end,\n\t\t\t\t\tCircleNote.maxCircleSize,\n\t\t\t\t\tthis.size\n\t\t\t\t)(Date.now()),\n\t\t\t\t0,\n\t\t\t\tMath.PI * 2\n\t\t\t);\n\t\tctx.fill();\n\n\t\tctx.beginPath();\n\t\tif (Date.now() - this.created < 200)\n\t\t\tctx.arc(\n\t\t\t\tthis.x,\n\t\t\t\tthis.y,\n\t\t\t\tmap(this.created, this.created + 200, 0, this.size)(Date.now()),\n\t\t\t\t0,\n\t\t\t\tMath.PI * 2\n\t\t\t);\n\t\telse ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);\n\t\tctx.stroke();\n\t}\n}\n\nexport class SideNote extends Note {\n\tconstructor(\n\t\tpublic end: number,\n\t\tpublic type: 'left' | 'right' | 'up' | 'down',\n\t\tpublic color: string = '#bb77bb'\n\t) {\n\t\tsuper(end);\n\t\tthis.type = type;\n\t\tthis.color = color;\n\n\t\tif (type === 'left') {\n\t\t\tthis.key = 'ArrowLeft';\n\t\t} else if (type === 'right') {\n\t\t\tthis.key = 'ArrowRight';\n\t\t} else if (type === 'up') {\n\t\t\tthis.key = 'ArrowUp';\n\t\t} else if (type === 'down') {\n\t\t\tthis.key = 'ArrowDown';\n\t\t}\n\t}\n\n\tisDead(): boolean {\n\t\treturn this.end < Date.now() - 1000;\n\t}\n\n\tdraw(ctx: CanvasRenderingContext2D): void {\n\t\tctx.fillStyle = this.color;\n\t\tctx.strokeStyle = this.color;\n\t\tctx.lineWidth = 10;\n\n\t\tconst lt = this.lifetimeMapper(Date.now()) ** 2 * 1.1 - 0.1;\n\n\t\tctx.beginPath();\n\t\tif (this.type === 'left') {\n\t\t\tctx.moveTo((1 - lt) * innerWidth, 0);\n\t\t\tctx.lineTo((1 - lt) * innerWidth, innerHeight);\n\t\t} else if (this.type === 'right') {\n\t\t\tctx.moveTo(lt * innerWidth, 0);\n\t\t\tctx.lineTo(lt * innerWidth, innerHeight);\n\t\t} else if (this.type === 'up') {\n\t\t\tctx.moveTo(0, (1 - lt) * innerHeight);\n\t\t\tctx.lineTo(innerWidth, (1 - lt) * innerHeight);\n\t\t} else if (this.type === 'down') {\n\t\t\tctx.moveTo(0, lt * innerHeight);\n\t\t\tctx.lineTo(innerWidth, lt * innerHeight);\n\t\t}\n\t\tctx.stroke();\n\t}\n\n\tscore(\n\t\tctx: CanvasRenderingContext2D,\n\t\tscores: number[],\n\t\tscore: number = 100 -\n\t\t\tMath.abs(map(this.created, this.end, -200, 0)(Date.now()))\n\t): void {\n\t\tscores.push(score);\n\n\t\tconst [text, color] = scoreToColor(score);\n\t\taddPersistent(\n\t\t\tnew PersistentText(\n\t\t\t\ttext,\n\t\t\t\tcolor,\n\t\t\t\tthis.type == 'left'\n\t\t\t\t\t? 100\n\t\t\t\t\t: this.type == 'right'\n\t\t\t\t\t? innerWidth - 100\n\t\t\t\t\t: innerWidth / 2,\n\t\t\t\tthis.type == 'up'\n\t\t\t\t\t? 100\n\t\t\t\t\t: this.type == 'down'\n\t\t\t\t\t? innerHeight - 100\n\t\t\t\t\t: innerHeight / 2\n\t\t\t)\n\t\t);\n\n\t\tconst lt = this.lifetimeMapper(Date.now()) ** 2 * 1.1 - 0.1;\n\t\taddPersistent(\n\t\t\tnew PersistentLine(\n\t\t\t\tthis.type == 'left'\n\t\t\t\t\t? (1 - lt) * innerWidth\n\t\t\t\t\t: this.type == 'right'\n\t\t\t\t\t? lt * innerWidth\n\t\t\t\t\t: innerWidth / 2,\n\t\t\t\tthis.type == 'up'\n\t\t\t\t\t? (1 - lt) * innerHeight\n\t\t\t\t\t: this.type == 'down'\n\t\t\t\t\t? lt * innerHeight\n\t\t\t\t\t: innerHeight / 2,\n\t\t\t\tthis.type == 'left' || this.type == 'right' ? 0 : Math.PI / 2,\n\t\t\t\tcolor\n\t\t\t)\n\t\t);\n\t}\n}\n"],"names":["hex2","map","PersistentCircle","addPersistent","PersistentLine","PersistentText","scoreMap","Infinity","scoreToColor","score","min","text","color","Note","isDead","end","Date","now","constructor","key","created","lifetimeMapper","CircleNote","maxCircleSize","x","Math","random","innerWidth","y","innerHeight","size","ctx","scores","abs","push","draw","strokeStyle","lineWidth","fillStyle","beginPath","arc","PI","fill","stroke","SideNote","type","lt","moveTo","lineTo"],"mappings":"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"}