{"version":3,"sources":["index.ts"],"sourcesContent":["import { canvas } from './autoCanvas.js';\nimport { IInfo } from './deps/bstypes/types/beatmap/shared/info.js';\nimport { IDifficulty as IDifficulty2 } from './deps/bstypes/types/beatmap/v2/difficulty.js';\nimport { IDifficulty as IDifficulty3 } from './deps/bstypes/types/beatmap/v3/difficulty.js';\nimport {\n\tBlobReader,\n\tBlobWriter,\n\tEntry,\n\tTextWriter,\n\tZipReader,\n} from './deps/zipjs/index.js';\nimport { map } from './helper.js';\nimport { CircleNote, Note, SideNote } from './noteTypes/index.js';\nimport { addNote, startGame } from './rhythm.js';\nimport { SoundPlayer } from './sound.js';\n\nconsole.log('hi');\n\n// <input type=\"file\" accept=\".zip,.rar,.7zip\" />\nconst input = document.createElement('input') as HTMLInputElement;\ninput.type = 'file';\ninput.accept = '.zip';\ndocument.body.appendChild(input);\n\nasync function readJSON(zip: Entry[], fName: string) {\n\treturn JSON.parse(\n\t\tawait zip.find((x) => x.filename == fName).getData(new TextWriter())\n\t);\n}\n\ncanvas.hidden = true;\n\ninput.addEventListener('change', async (e) => {\n\tconst file = (<HTMLInputElement>e.target).files[0];\n\tconst blobReader = new BlobReader(file);\n\tconst zipReader = new ZipReader(blobReader);\n\tconst files = await zipReader.getEntries();\n\n\tconsole.log(files);\n\n\tconst songInfo: IInfo = await readJSON(files, 'Info.dat');\n\tconst songDifficulties =\n\t\tsongInfo._difficultyBeatmapSets[0]._difficultyBeatmaps.map((x) => [\n\t\t\tx._difficulty,\n\t\t\tx._beatmapFilename,\n\t\t]) as [string, string][];\n\n\tconst songAudio = await files\n\t\t.find((x) => x.filename == songInfo._songFilename)\n\t\t.getData(new BlobWriter());\n\tconst songAudioUrl = URL.createObjectURL(songAudio);\n\tconst songAudioElement = new Audio(songAudioUrl);\n\n\t// console.log(songInfo, songDifficulties);\n\tinput.parentElement?.removeChild(input);\n\n\tconst difficultySelect = document.createElement('select');\n\tfor (const [difficulty, beatmap] of songDifficulties) {\n\t\tconst option = document.createElement('option');\n\t\toption.value = beatmap;\n\t\toption.innerText = difficulty;\n\t\tdifficultySelect.appendChild(option);\n\t}\n\tdocument.body.appendChild(difficultySelect);\n\n\tconst nthNoteSelect = document.createElement('select');\n\tfor (let i = 1; i <= 10; i++) {\n\t\tconst option = document.createElement('option');\n\t\toption.value = i.toString();\n\t\toption.innerText = i.toString();\n\t\tnthNoteSelect.appendChild(option);\n\t}\n\tdocument.body.appendChild(nthNoteSelect);\n\n\tconst startButton = document.createElement('button');\n\tstartButton.innerText = 'Start';\n\tdocument.body.appendChild(startButton);\n\n\tstartButton.addEventListener('click', async () => {\n\t\tconst beatmap: IDifficulty2 | IDifficulty3 = await readJSON(\n\t\t\tfiles,\n\t\t\tdifficultySelect.value\n\t\t);\n\t\t// console.log(beatmap);\n\t\tstartButton.parentElement?.removeChild(startButton);\n\t\tdifficultySelect.parentElement?.removeChild(difficultySelect);\n\t\tnthNoteSelect.parentElement?.removeChild(nthNoteSelect);\n\n\t\tcanvas.hidden = false;\n\n\t\tsetTimeout(() => songAudioElement.play(), 100);\n\t\tconst songStart = Date.now() + 100;\n\n\t\t// setInterval(() => {\n\t\t// \tconst time = Date.now() - songStart;\n\t\t// \tconsole.log(time - songAudioElement.currentTime * 1000);\n\t\t// }, 1000);\n\n\t\tconst beatSize = 60000 / songInfo._beatsPerMinute;\n\n\t\tconst hMap = map(-1, 4, 0, canvas.width);\n\t\tconst vMap = map(-1, 3, 0, canvas.height);\n\n\t\tconst noteTime = 3000;\n\n\t\tconsole.log(beatmap);\n\n\t\tif ('_version' in beatmap) {\n\t\t\tbeatmap._notes\n\t\t\t\t.filter(\n\t\t\t\t\t(x) => x._type < 2 && (x._cutDirection < 4 || x._cutDirection == 8)\n\t\t\t\t)\n\t\t\t\t.map((x): Note => {\n\t\t\t\t\tif (x._cutDirection == 8) {\n\t\t\t\t\t\tconst note = new CircleNote(\n\t\t\t\t\t\t\tsongStart + x._time * beatSize,\n\t\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\thMap(x._lineIndex),\n\t\t\t\t\t\t\tvMap(x._lineLayer)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tnote.created = note.end - noteTime;\n\t\t\t\t\t\tnote.lifetimeMapper = map(note.created, note.end, 0, 1);\n\t\t\t\t\t\treturn note;\n\t\t\t\t\t} else if (x._cutDirection == 0) {\n\t\t\t\t\t\tconst note = new SideNote(\n\t\t\t\t\t\t\tsongStart + x._time * beatSize,\n\t\t\t\t\t\t\t'up',\n\t\t\t\t\t\t\t'#bbbb77'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tnote.created = note.end - noteTime;\n\t\t\t\t\t\tnote.lifetimeMapper = map(note.created, note.end, 0, 1);\n\t\t\t\t\t\treturn note;\n\t\t\t\t\t} else if (x._cutDirection == 1) {\n\t\t\t\t\t\tconst note = new SideNote(\n\t\t\t\t\t\t\tsongStart + x._time * beatSize,\n\t\t\t\t\t\t\t'down',\n\t\t\t\t\t\t\t'#bb5555'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tnote.created = note.end - noteTime;\n\t\t\t\t\t\tnote.lifetimeMapper = map(note.created, note.end, 0, 1);\n\t\t\t\t\t\treturn note;\n\t\t\t\t\t} else if (x._cutDirection == 2) {\n\t\t\t\t\t\tconst note = new SideNote(\n\t\t\t\t\t\t\tsongStart + x._time * beatSize,\n\t\t\t\t\t\t\t'left',\n\t\t\t\t\t\t\t'#77bb77'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tnote.created = note.end - noteTime;\n\t\t\t\t\t\tnote.lifetimeMapper = map(note.created, note.end, 0, 1);\n\t\t\t\t\t\treturn note;\n\t\t\t\t\t} else if (x._cutDirection == 3) {\n\t\t\t\t\t\tconst note = new SideNote(\n\t\t\t\t\t\t\tsongStart + x._time * beatSize,\n\t\t\t\t\t\t\t'right',\n\t\t\t\t\t\t\t'#5555bb'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tnote.created = note.end - noteTime;\n\t\t\t\t\t\tnote.lifetimeMapper = map(note.created, note.end, 0, 1);\n\t\t\t\t\t\treturn note;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.filter((x, i) => i % +nthNoteSelect.value == 0)\n\t\t\t\t.forEach((x) => addNote(x));\n\t\t} else {\n\t\t\t// V3\n\t\t\tbeatmap.colorNotes\n\t\t\t\t.filter((x) => x.d < 4 || x.d == 8)\n\t\t\t\t.map((x): Note => {\n\t\t\t\t\tif (x.d == 8) {\n\t\t\t\t\t\tconst note = new CircleNote(\n\t\t\t\t\t\t\tsongStart + x.b * beatSize,\n\t\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\thMap(x.x),\n\t\t\t\t\t\t\tvMap(x.y)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tnote.created = note.end - noteTime;\n\t\t\t\t\t\tnote.lifetimeMapper = map(note.created, note.end, 0, 1);\n\t\t\t\t\t\treturn note;\n\t\t\t\t\t} else if (x.d == 0) {\n\t\t\t\t\t\tconst note = new SideNote(\n\t\t\t\t\t\t\tsongStart + x.b * beatSize,\n\t\t\t\t\t\t\t'up',\n\t\t\t\t\t\t\t'#bbbb77'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tnote.created = note.end - noteTime;\n\t\t\t\t\t\tnote.lifetimeMapper = map(note.created, note.end, 0, 1);\n\t\t\t\t\t\treturn note;\n\t\t\t\t\t} else if (x.d == 1) {\n\t\t\t\t\t\tconst note = new SideNote(\n\t\t\t\t\t\t\tsongStart + x.b * beatSize,\n\t\t\t\t\t\t\t'down',\n\t\t\t\t\t\t\t'#bb5555'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tnote.created = note.end - noteTime;\n\t\t\t\t\t\tnote.lifetimeMapper = map(note.created, note.end, 0, 1);\n\t\t\t\t\t\treturn note;\n\t\t\t\t\t} else if (x.d == 2) {\n\t\t\t\t\t\tconst note = new SideNote(\n\t\t\t\t\t\t\tsongStart + x.b * beatSize,\n\t\t\t\t\t\t\t'left',\n\t\t\t\t\t\t\t'#77bb77'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tnote.created = note.end - noteTime;\n\t\t\t\t\t\tnote.lifetimeMapper = map(note.created, note.end, 0, 1);\n\t\t\t\t\t\treturn note;\n\t\t\t\t\t} else if (x.d == 3) {\n\t\t\t\t\t\tconst note = new SideNote(\n\t\t\t\t\t\t\tsongStart + x.b * beatSize,\n\t\t\t\t\t\t\t'right',\n\t\t\t\t\t\t\t'#5555bb'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tnote.created = note.end - noteTime;\n\t\t\t\t\t\tnote.lifetimeMapper = map(note.created, note.end, 0, 1);\n\t\t\t\t\t\treturn note;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.filter((x, i) => i % +nthNoteSelect.value == 0)\n\t\t\t\t.forEach((x) => addNote(x));\n\t\t}\n\n\t\tstartGame();\n\t});\n\n\t// songAudioElement.play();\n});\n\nconst audio = new SoundPlayer('/assets/hit.mp3', 0.193);\naddEventListener('keydown', () => {\n\taudio.play();\n});\n\nstartGame;\n"],"names":["canvas","BlobReader","BlobWriter","TextWriter","ZipReader","map","CircleNote","SideNote","addNote","startGame","SoundPlayer","console","log","input","document","createElement","type","accept","body","appendChild","readJSON","zip","fName","JSON","parse","find","x","filename","getData","hidden","addEventListener","e","file","target","files","blobReader","zipReader","getEntries","songInfo","songDifficulties","_difficultyBeatmapSets","_difficultyBeatmaps","_difficulty","_beatmapFilename","songAudio","_songFilename","songAudioUrl","URL","createObjectURL","songAudioElement","Audio","parentElement","removeChild","difficultySelect","difficulty","beatmap","option","value","innerText","nthNoteSelect","i","toString","startButton","setTimeout","play","songStart","Date","now","beatSize","_beatsPerMinute","hMap","width","vMap","height","noteTime","_notes","filter","_type","_cutDirection","note","_time","undefined","_lineIndex","_lineLayer","created","end","lifetimeMapper","forEach","colorNotes","d","b","y","audio"],"mappings":"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"}